# 目次
- [概要と利用方法](#概要と利用方法)
- [作成・更新すべき資料](#作成更新すべき資料)
  - [ドキュメント作成・更新のルール](#ドキュメント作成更新のルール)
  - [進捗管理とセルフモニタリング](#進捗管理とセルフモニタリング)
    - [plan-and-progress.mdの作成・更新ガイドライン](#plan-and-progressmdの作成更新ガイドライン)
    - [具体的な適用例](#具体的な適用例)
  - [プロジェクト/リポジトリのドキュメンテーションガイド](#プロジェクトリポジトリのドキュメンテーションガイド)
  - [プロジェクト理解のための資料](#プロジェクト理解のための資料)
    - [プロジェクトの目的と概要資料](#プロジェクトの目的と概要資料)
    - [現行プロダクトのドキュメント](#現行プロダクトのドキュメント)
    - [機能開発ロードマップ](#機能開発ロードマップ)
    - [機能開発のドキュメント設計](#機能開発のドキュメント設計)
  - [Clineのためのルールとガイドライン](#clineのためのルールとガイドライン)
    - [関連ファイルの記録](#関連ファイルの記録)
    - [コミットの提案とメッセージ記録](#コミットの提案とメッセージ記録)
  - [コード理解のための手順とコツ](#コード理解のための手順とコツ)
    - [Repomixの活用](#repomixの活用)
  - [モノレポ構造のドキュメント](#モノレポ構造のドキュメント)
- [Changelog](#changelog)

# 概要と利用方法

このドキュメントはLLMを活用した開発に不可欠なドキュメント種別や構造をまとめたものです。  
「必須ドキュメント」や「推奨ドキュメント」のセクションを参照し、プロジェクトに必要なドキュメントを作成・更新してください。

# 必須ドキュメント

## ドキュメント作成・更新のルール

**これらのルールは以下の両方に適用されます**：
1. このPrompt.mdガイドラインを自プロジェクトに適用する際のplan-and-progress.md等の作成・更新
2. プロジェクト/リポジトリの全てのドキュメント作成・更新作業

**注意**: これらの基本ルールは、各プロジェクト固有のドキュメンテーションガイドに組み込み、プロジェクト特性に合わせて具体化する必要があります。

| ルール | 説明 |
|-------|------|
| 👤 **人間の確認** | 作成・更新対象のドキュメント一覧を人間に確認し、取捨選択できるようにすること |
| 📅 **日付の記録** | 資料冒頭に更新日と確認日のセクションを配置し、更新日時を記載すること |
| 📋 **変更履歴** | 資料後半にChangelogを配置し、変更内容と変更日時を記載すること |
| 🔄 **最小変更** | 意味的な大きな変化がない場合には確認日のみ更新し、他の内容は変更しないこと |
| ❓ **質問の推奨** | 不明な点があれば遠慮せずに質問すること |
| 🚫 **除外ファイル** | .gitignore等でignoreされているファイルは対象外とすること |

## 進捗管理とセルフモニタリング

**LLMの計画立案と進捗追跡**: ClineなどのLLMは、このPrompt.mdの各ルールの適用計画を策定し、進捗状況を自律的に追跡・管理し、`plan-and-progress.md`ファイルに記録してください。これにより、プロジェクトがルールをどのように段階的に適用していくか計画し、その進捗を可視化します。

> **重要**:
> - 計画策定後は必ず人間と内容を調整し、現実的な実装スケジュールと優先順位について合意を得てください。
> - LLMは自律的にこの進捗状況を評価・記録し、改善提案を行うことでプロジェクトの品質向上に貢献してください。

### plan-and-progress.mdの作成・更新ガイドライン

LLMは初回参照時および重要な作業完了時に`plan-and-progress.md`を作成・更新し、以下の内容を含めてください：

- **適用計画の概要**: 段階的な適用計画と優先順位
- **各セクションごとの計画と状況**: 個々のルールやガイドラインの計画と適用状況（課題、解決策、次のステップを含む）

### 具体的な適用例

```markdown
# Prompt.md計画と進捗状況

更新日: 2025/03/22

# 適用計画の概要
実装期間: 2025/02/01〜2025/05/30
段階的適用方針:
1. 第1フェーズ: 基本ルール確立（〜2025/03/01）
2. 第2フェーズ: 主要ドキュメント整備（〜2025/04/15）
3. 第3フェーズ: 全体最適化と自動化（〜2025/05/30）

# 各セクションの計画と状況

## 1. 作成・更新すべき資料
| 資料 | 計画 | 状態 | 備考 |
|------|------|------|------|
| 🎯 プロジェクトの目的と概要 | フェーズ1 | ✅ 適用済 | /docs/guide/purpose.md 作成完了 |
| 📚 現行プロダクトのドキュメント | フェーズ2 | ⚠️ 部分適用 | API仕様書は完成、他は作成中 |
| 🗺️ 機能開発ロードマップ | フェーズ2 | 🔄 進行中 | 初版をチームレビュー中 |

### 課題と次のステップ
- **課題**: APIドキュメントの自動生成と手動更新の不整合
- **解決策**: APIドキュメント生成・更新フローの一元化
- **次のステップ**: 機能開発ドキュメントテンプレートの作成

## 2. Clineのためのルールとガイドライン
| ガイドライン | 計画 | 状態 | 備考 |
|------------|------|------|------|
| 📖 関連ファイルの記録 | フェーズ1 | ✅ 適用済 | すべて整備完了 |
| 💾 コミットの提案とメッセージ記録 | フェーズ1 | ✅ 適用済 | コミットテンプレート導入済み |

### 課題と次のステップ
- **課題**: チームメンバーによるChangelogの記載漏れ
- **解決策**: PRチェックリストにChangelog確認項目を追加
- **次のステップ**: Changelogの一貫性向上のための施策実施
```

## プロジェクト/リポジトリのドキュメンテーションガイド

「ドキュメント作成・更新のルール」セクションで定義された基本ルールを、プロジェクト固有のコンテキストに合わせて具体化し、適用するためのガイドを作成してください。このガイドは独立したファイル（例: `docs/document-guidelines.md`）として作成し、チーム全体で参照できるようにすることを推奨します。

- 本資料の指針と既存プロジェクトの状況とのバランスを考慮し、プロジェクトごとにカスタマイズした内容を記載
- 人もLLMもこのガイドを参照し、プロジェクトのドキュメンテーションを行う
- ガイドと現状のズレを検知した場合、LLMは人間に確認し、更新を提案する
- プロジェクト固有の標準テンプレート、命名規則、フォルダ構成、レビュープロセス等を定義する

## プロジェクト理解のための資料

### 🎯 プロジェクトの目的と概要資料

**プロジェクトの目的**や各種オンボーディング資料を`/docs/guide/`配下等に作成・更新すること。

**注意**: プロジェクトの目的が見つからない場合、LLMは必ず人間に確認してください。

### 📚 現行プロダクトのドキュメント

既存プロダクトについて、以下のドキュメントを整備・維持する:

- ユーザーマニュアル/ユーザーガイド
- 機能一覧/仕様書
- API仕様書/インターフェース定義
- アーキテクチャ概要図
- データモデル図/ER図
- トラブルシューティングガイド
- リリースノート/変更履歴

### 🗺️ 機能開発ロードマップ

今後の機能開発のロードマップを`/docs/guide/roadmap.md`等に作成・更新する。

**重要**: 以下の場合、LLMは必ず人間に確認してください:
- ロードマップが存在しない場合
- ロードマップの内容が不明な場合
- ロードマップが数週間以上更新されていない場合

### 📐 機能開発のドキュメント設計

各機能開発に必要なドキュメントの種類、配置場所、作成タイミングを定義する。推奨される標準的なドキュメント構成:

### #ドキュメントの種類

**Product Requirement Document**
機能の「なぜ」と「何を」を理解するためのドキュメント（機能開発の目的、概要、要件、ユーザーストーリー、参考事例、リリースノート等）

**Technical Design Document**
機能の「どのように」を理解するためのドキュメント。複数ファイルに分割することを推奨:

| ファイルパス | 内容 |
|------------|------|
| */Technical-Design/README.md | 全体を俯瞰できるIndexや技術的な概要 |
| */Technical-Design/packages/[パッケージ名]/README.md | 既存パッケージの改修ポイント |
| */Technical-Design/packages/[パッケージ名]/implements.md | 変更実装のための詳細設計書 |
| */Technical-Design/packages/[パッケージ名]/tests.md | 変更テストのための詳細設計書 |
| */Technical-Design/architecture.md | パッケージ間の関係性をまとめたアーキテクチャ |
| */Technical-Design/E2E.md | 機能追加に対するE2Eテスト |

*目的や必要な開発ステップに応じて柔軟にドキュメントを追加すること*

### #開発ステップ

**標準的な開発フロー**:

1. **要件定義**: Product Requirement Documentを作成しレビュー
2. **技術検討**: Technical Design Documentを作成しレビュー
3. **実装**: Technical Design Documentをもとに実装、コードレビュー
4. **テスト**: Technical Design Documentをもとにテスト実施
5. **リリース**: Technical Design Documentをもとにリリース実施
6. **振り返り**: 開発フローの改善等を実施
7. **評価**: 顧客の反応などをもとに将来の機能開発の参考にする

## Clineのためのルールとガイドライン

### 📖 関連ファイルの記録

> **単一ファイル設計に関する重要な注記**: このPrompt.mdは単一ファイル構造で設計されています。必要な情報はすべてこのファイル内に含まれており、外部参照は推奨されません。

以下は記録目的のみの情報です:

| 補足ファイル | 説明 |
|------------|------|
| `.clinerules/README.md` | ディレクトリの概要 |
| `.clinerules/commit-rules.md` | コミット提案の詳細ルール |
| `.clinerules/prompt-changelog-guide.md` | Changelog記載ガイドライン |
| `.clinerules/prompt-editing-guidelines.md` | Prompt.md編集の方針 |
| `.clinerules/important-docs.md` | プロジェクト重要資料の場所 |

### 💾 コミットの提案とメッセージ記録

**必ず遵守すべき主要ポイント**:

✅ **積極的な提案**: 作業完了時には必ずコミットを提案すること
✅ **標準形式の遵守**: 「種類: 要約」の形式で、詳細な説明と変更ファイル一覧を含めること
✅ **プロンプト履歴の記録**: プロンプト履歴を必ずコミットメッセージに含めること
✅ **ユーザー承認**: コミット提案時にはユーザーの承認を得ること

## 🔍 コード理解のための手順とコツ

### Repomixの活用

- **効率的な理解**: repomixのMCPを利用して大規模コードベースを効率的に理解する
- **パッケージ分析**: 特定パッケージの調査には、repomixによる分析が強く推奨される
- **通信負荷軽減**: 数十ファイル以上のパッケージでは、Repomixを活用して関数シグネチャのみを効果的に分析し、時間短縮
- **柔軟な利用**: リポジトリ全体、特定パッケージ、特定ディレクトリなど様々な階層で利用可能
- **設定確認**: repomixのMCPが未設定の場合は、ユーザにセットアップを促す

## 📦 モノレポ構造のドキュメント

**モノレポ対応**: リポジトリがモノレポ構造の場合、各パッケージのREADMEを適切に作成・更新してください:

- `/apps/web/README.md`
- `/packages/database/README.md`

# Changelog

## 2025/03/21
- [追加] 初版作成