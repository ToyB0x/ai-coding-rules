# Documentation System for People and LLMs to Work Together

## ドキュメント管理の概念モデル

このドキュメントシステムは、ESLintなどのリンティングツールに着想を得た概念モデルに基づき、高品質なドキュメントを確保するための3つの主要コンポーネントで構成されます。

```mermaid
graph TB
  subgraph "レベル 1"
    A["ドキュメントガイドライン"]
  end
  
  subgraph "レベル 2"
    B1["ルール: 種別定義"]
    B2["ルール: 配置構造"]
    B3["ルール: フォーマット"]
    B4["ルール: 命名規則"]
    B5["ルール: 内容規則"]
    B6["ルール: メタルール"]
  end
  
  subgraph "レベル 3"
    D["ドキュメント検証システム (Linter)"]
  end
  
  subgraph "レベル 4"
    E1["ドキュメント1"]
    E2["ドキュメント2"]
  end
  
  A --> B1
  A --> B2
  A --> B3
  A --> B4
  A --> B5
  A --> B6
  
  B6 --> B1
  B6 --> B2
  B6 --> B3
  B6 --> B4
  B6 --> B5
  
  D -.-> |"参照"| B1
  D -.-> |"参照"| B2
  D -.-> |"参照"| B3
  D -.-> |"参照"| B4
  D -.-> |"参照"| B5
  D -.-> |"参照"| B6
  
  D -.-> |"ルールを使って検証 & 修正"| E1
  D -.-> |"ルールを使って検証 & 修正"| E2
  
  style A fill:#f9f,stroke:#333,stroke-width:2px
  style B1 fill:#bbf,stroke:#333,stroke-width:1px
  style B2 fill:#bbf,stroke:#333,stroke-width:1px
  style B3 fill:#bbf,stroke:#333,stroke-width:1px
  style B4 fill:#bbf,stroke:#333,stroke-width:1px
  style B5 fill:#bbf,stroke:#333,stroke-width:1px
  style B6 fill:#bbf,stroke:#333,stroke-width:1px
  style D fill:#fbb,stroke:#333,stroke-width:2px
  style E1 fill:#ddd,stroke:#333,stroke-width:1px
  style E2 fill:#ddd,stroke:#333,stroke-width:1px
```

### 主要コンポーネント

1. **ドキュメントガイドライン**（レベル1）
   - 目的、価値観、長期的ビジョンを定義
   - ドキュメント管理の理由（「なぜ」「何のために」）を示す
   - 例：人間とLLMが理解できる形式で最新状態を維持し、迅速な情報アクセスを可能にする

2. **ドキュメントルール**（レベル2）
   - ガイドラインに基づく具体的で検証可能なルール
   - 種別定義、配置構造、フォーマット、命名規則、内容規則などの基準
   - **メタルール**: 他のルールを管理・制御するルール
   - 例：マークダウンファイルは最上部に更新日時と目次を含む

3. **ドキュメント検証システム (Linter)**（レベル3）
   - ルール適用状況のチェックと強制適用
   - LLMを活用した検証と自動修正
   - 例：コミット前のマークダウンファイルチェックと違反報告・修正

### ソフトウェアエンジニアリング実践との関係

この概念モデルは、以下のソフトウェアエンジニアリングツールと実践に対応します：

1. **ドキュメントガイドライン** ≈ アーキテクチャ原則・設計思想
2. **ドキュメントルール** ≈ コーディング規約・ESLintルール
3. **ドキュメント検証システム** ≈ ESLint（`--check`と`--fix`機能）

ドキュメント検証システムは、ESLintと同様のメカニズムでドキュメント品質を確保し、LLMによるコンテキスト認識検証を行います。

## 目的

人とLLMが効率的にプロジェクトを理解し協働するための、ドキュメントの作成・更新・管理に関するガイドラインとプロセスを提案します。

## 前提や背景

- 人もLLMもContextサイズに制約があるため、ドキュメントを適切に分割・整理する必要がある。
- LLMと人間の協働には、双方が理解できるドキュメント形式が必要である。

## 用語

- **AI**: CLINE やRoo Code などのAI、LLMツール
- **ドキュメント**: テキスト資料や画像資料（プログラムコードも含む）
- **ドキュメントガイドライン**: プロジェクトの目的や規模に応じた、ドキュメントの目的、価値観、長期的ビジョン
- **ドキュメントルール**: ドキュメント作成・更新・管理のための具体的で検証可能なルール。以下のようなルールがある：
  - 種別定義
  - 配置構造
  - フォーマット
  - 命名規則
  - 内容規則
  - メタルール（他のルールを管理・制御するルール）

## 利用フロー

1. **ドキュメントガイドラインの策定**
   - ベストプラクティスとプロジェクト特性の理解
   - ガイドライン（構造、規約など）の策定と既存ガイドラインの改善検討

2. **現状とのギャップ分析**
   - 基本方針と現状の比較、ギャップの特定と分析

3. **適用計画の策定**
   - ギャップの優先順位付けと段階的な適用計画の作成

4. **適用計画の実行**
   - 計画に基づく改善実施と、必要に応じた計画の見直し

5. **定期的な検査と更新**
   - ガイドラインの定期的な見直し、目的や機能変化に応じた調整、遵守状況の確認と修正

## ドキュメントガイドラインと各ドキュメントルールの推奨例

以下は推奨例です。プロジェクトの特性に応じて調整してください。
実際の運用では各ルールやガイドラインを個別ファイルに分けて管理することを推奨します。

### ドキュメントガイドライン例
#### 配置場所
- docs/README.md

#### 具体例
```markdown
# ドキュメント基本方針
## 目的
- 人とLLMがドキュメントを作成・更新するためのガイドラインを策定する
- プロジェクトの持続的な発展と効率的な知識共有を実現する
- 異なるステークホルダーの必要性に応じたドキュメント構造を確立する
- LLM（Clineなど）の活用を含めた、ドキュメント作成・維持の効率化を実現する
- プロジェクトの知識資産としてのドキュメントの価値を最大化する

## ドキュメント体系の理想像
1. **網羅性**: プロジェクト全体の知識が適切に文書化され、必要な情報が容易に見つかる
2. **一貫性**: 標準化されたテンプレートとルールに基づいた、一貫性のある表現と構造
3. **保守性**: 更新が容易で、コードとドキュメントの乖離が最小限に抑えられる
4. **対象者別アクセス**: 各ステークホルダーが必要な情報に効率的にアクセスできる
5. **プロセス統合**: 開発プロセスと緊密に統合された、持続可能なドキュメンテーションフロー
6. **依存関係の透明性**: ドキュメント間の依存関係が明示され、変更の影響範囲が容易に把握できる

## ドキュメントガイドラインを実現するルールの一覧と概要
- [ドキュメント種別](docs/doc-types.md): プロジェクトに必要なドキュメントの種別を定義
- [ドキュメント配置構造](docs/doc-structure.md): ドキュメントの配置構造を定義
- [ドキュメントフォーマット](docs/doc-format.md): ドキュメントのフォーマットを定義
- [ドキュメントの更新ルール](docs/doc-update-rules.md): ドキュメントの更新ルールを定義
- [ドキュメント依存関係管理](docs/doc-dependencies.md): ドキュメント間の依存関係を管理するルールを定義
- [ドキュメントメタデータ標準](docs/doc-metadata.md): ドキュメントのメタデータ標準を定義
- [ドキュメント検証システム](docs/doc-validation.md): ドキュメントの検証と自動修正の仕組みを定義
```
#### 注意事項
- ルートディレクトリのREADMEからリンクさせる
- サマリーとルールセクションを必ず含める

### ドキュメントルール例: ドキュメント種別の定義
#### 配置場所
- docs/doc-types.md

#### 具体例
```markdown
# ドキュメント種別
## 目的
- プロジェクトに必要なドキュメントの種別を定義する

## ドキュメント種別
### プロジェクト概要
- プロジェクトの目的や概要を説明するドキュメント
- 全プロジェクトメンバーが必ず知っておくべき情報

### ロードマップ一覧
- プロジェクトのロードマップを一覧化したドキュメント
- 開発予定の機能やリリース予定日などを記載
- 詳細は別ファイルへと分割

### ユーザガイド
- プロジェクトのユーザ向けのドキュメント
- ユーザがプロジェクトを利用するために必要な情報を記載

### ...
## AIインストラクション
このルールを読んだAIの行動指針：
- 定義された種別に従ったドキュメント分類・作成と、種別特性に合わせた構造・内容の提案
- 既存ドキュメントの種別適合性確認と必要に応じた改善提案
- 不足している重要なドキュメント種別の作成提案
```

### ドキュメントルール例: ドキュメントの配置構造
#### 配置場所
- docs/doc-structure.md

#### 具体例
```markdown
# ドキュメントの配置構造
## 目的
- ドキュメントの配置構造を定義し、人とLLMがドキュメントを発見しやすくする
- 対象読者別のアクセスパスを最適化し、必要な情報への効率的なアクセスを実現する
- 時間軸（現在の機能と未来の機能）による分類を明確にする
- ルールとコンテンツを分離し、管理の一貫性を確保する

## 配置構造の基本原則
1. **対象者中心**: 主要な情報を開発者・運用者・エンドユーザーなど対象読者別に整理
2. **明確な責任分離**: 開発、運用、利用の各領域を明確に区分
3. **ルールとコンテンツの分離**: 規約と実際のコンテンツを分けて管理
4. **時間軸による分類**: 現在の機能と未来の機能を区別

## 理想のドキュメント構造
/                                     # リポジトリルート
├── .clinerules                       # AIのエントリポイント設定ファイル
├── .roomodes                         # カスタムモード定義ファイル
├── README.md                         # リポジトリの概要やdocs/README.mdへのリンク
└── docs/                             # ドキュメントディレクトリ
    ├── README.md                     # ドキュメントガイドライン
    ├── PLAN.md                       # ドキュメントルールの適用計画
    ├── PROGRESS.md                   # ドキュメントルールの適用状況
    ├── guide/                            # すべてのガイドのIndex
    │   ├── README.md                     # ガイド全体の目次と導入
    │   ├── developer/                    # 開発者向けガイド
    │   │   ├── README.md                 # 開発者向けガイド目次
    │   │   ├── getting-started/          # 開発環境構築等
    │   │   │   ├── onboardings/         # オンボーディング資料
    │   │   │   │   └──[username]/ # ユーザ名ごとのオンボーディング資料(AIにより自動生成)
    │   │   │   │      └──ai.md # ユーザ名ごとのAIオンボーディングチェックリスト(AIにより自動生成。RooCodeのモード設定のセットアップなどが記載)
    │   │   │   └── ...
    │   │   ├── development-flow/         # 開発フロー関連
    │   │   ├── packages/                 # モノレポ内のパッケージ概要
    │   │   ├── architecture/             # アーキテクチャ関連
    │   │   │   ├── adr/                  # アーキテクチャ決定記録
    │   │   │   └── ...
    │   │   └── ...
    │   ├── operator/                     # 運用者向けガイド
    │   │   ├── README.md
    │   │   ├── deployment/               # デプロイメント関連
    │   │   ├── monitoring/               # 監視関連
    │   │   ├── maintenance/              # メンテナンス関連
    │   │   └── ...
    │   └── users/                        # ユーザー向けガイド
    │       ├── README.md                 # ユーザー向けガイド目次
    │       ├── basics/                   # 基本操作ガイド
    │       ├── integration/              # 連携関連ガイド
    │       └── ...
    ├── templates/                        # すべてのテンプレートを集約
    │   ├── README.md                     # テンプレート全体の説明と使い方
    │   ├── documents/                    # ドキュメント作成用テンプレート
    │   ├── development/                  # 開発用テンプレート
    │   └── operations/                   # 運用用テンプレート
    ├── rules/                            # ドキュメントルール
    │   ├── README.md                     # ドキュメントルール一覧と概要
    │   ├── ai/                           # AI関連ドキュメントルール
    │   │   ├── README.md                 # AI関連ルールの概要
    │   │   ├── config.md                 # AIの設定ファイル確認
    │   │   ├── minimum-change.md         # 最小変更ルール
    │   │   ├── ask.md                    # 質問ルール
    │   │   ├── commit.md                 # コミットメッセージルール
    │   │   ├── tools/                    # ツール活用ルール
    │   │   │    └── repomix.md           # Repomix利用ルール
    │   │   ├── maintenance.md            # ドキュメント更新ルール
    │   │   └── preparation.md            # AI利用準備ルール
    │   ├── guide/
    │   │   ├── developer/                # 開発者向けドキュメントルール
    │   │   │   ├── code/                 # コードファイルルール
    │   │   │   ├── package/              # パッケージREADMEルール
    │   │   │   ├── architecture/         # アーキテクチャルール
    │   │   │   └── development-flow/     # 開発フローのルール
    │   │   ├── operator/                 # 運用者向けルール
    │   │   └── users/                    # ユーザー向けルール
    │   ├── documents/                    # ドキュメント全般ルール
    │   │   ├── README.md                 # 概要
    │   │   ├── maintenance/              # 更新ルール
    │   │   └── metadata/                 # メタデータルール
    │   │       ├── changelog/            # Changelogルール
    │   │       ├── maintenance-date/     # メンテナンス日付ルール
    │   │       ├── relations/            # 参照関係ルール
    │   │       └── ...
    │   ├── self-check/                   # ドキュメント検証システムの自己テスト
    │   │   ├── README.md                 # 自己テストの説明と使い方
    │   │   └── test/                     # テストケース用ディレクトリ
    │   │       ├── feature-spec/         # 機能仕様書の検証用ファイル
    │   │       │   ├── correct.md        # 正しい形式の機能仕様書
    │   │       │   └── wrong.md          # 間違った形式の機能仕様書
    │   │       └── api-doc/              # API仕様書の検証用ファイル
    │   │           ├── correct.md        # 正しい形式のAPI仕様書
    │   │           └── wrong.md          # 間違った形式のAPI仕様書
    │   └── product/                      # プロダクト関連ルール
    └── product/                          # プロダクト情報
        ├── README.md                     # プロダクト概要
        ├── vision.md                     # ビジョン・ミッション
        ├── product-goal.md               # 製品目標
        ├── value-proposition.md          # 価値提案
        ├── members.md                    # 開発メンバー
        ├── features/                     # リリース済み機能
        │   ├── README.md                 # 機能一覧と概要
        │   └── [機能名]/                 # 個別機能ディレクトリ
        │       ├── overview.md           # 機能概要（ユーザー向け）
        │       ├── technical-details.md  # 技術詳細（開発者向け）
        │       └── specs.md        # 仕様（docs/guide/users/配下から間接的に参照されうる、内部仕様を含めた詳細な機能解説）
        ├── glossary/                     # 用語集
        │   ├── README.md                 # 用語集の概要
        │   └── terms/                    # 各用語の詳細
        │       └── [用語名].md           # 個別用語の定義
        ├── personas/                     # ユーザーペルソナ
        │   └── README.md                 # ペルソナ一覧と詳細
        ├── user-journey/                 # ユーザージャーニー
        │   └── README.md                 # 主要ジャーニーの図解
        ├── metrics/                      # 製品メトリクス
        │    └── README.md                # KPI・OKR等の指標
        └── roadmaps/                     # 未来の機能計画
            ├── README.md                 # ロードマップ概要
            └── [予定機能名]/              # 予定機能の詳細計画 (開発が終わってリリースされた昨日はfeatures/に移動・統合されroadmap/からは削除)
                ├── README.md             # 概要とドキュメント構造
                ├── PLAN.md               # 機能開発の実行計画
                ├── PROGRESS.md           # 機能開発の実行計画の進捗状況(PLAN.mdと統合して1ファイルにしても良い)
                ├── requirements/         # 非エンジニア向け
                │   ├── README.md         # 要件ドキュメントガイド
                │   ├── PRD.md            # 製品要件定義書
                │   └── images/           # 図表・モックアップ
                └── systems/              # エンジニア向け
                    ├── README.md         # システムドキュメントガイド
                    ├── overview-specs/   # システム全体設計
                    │   ├── README.md     # 全体設計概要
                    │   └── system.md     # システム全体設計書
                    ├── package-specs/    # パッケージ仕様書
                    │   ├── README.md     # パッケージ仕様概要
                    │   ├── [パッケージ名]/ # 各パッケージ仕様
                    │   └── ...
                    └── test-specs/       # テスト仕様書
                        ├── README.md     # テスト戦略概要
                        ├── e2e-tests.md  # E2Eテスト仕様
                        └── unit-tests.md # ユニットテスト仕様

## AIインストラクション
このルールを読んだAIの行動指針：
- 定義構造に基づくドキュメント配置の提案と必要に応じた再構成の推奨
- 対象読者別アクセスパス、相互参照、時間軸分類を考慮したナビゲーション設計
- ルールとコンテンツの分離原則維持と適切な階層構造の確保
```

#### 注意事項
- ルートディレクトリのREADMEからリンクさせる
- .clinerules などLLM向けファイルにもリンクを貼る
- フォルダ内にREADME.mdしか配置しない場合は階層を浅くするために、上階層に[rule-name].mdとして作成する

### ドキュメントルール例: 開発フローの詳細定義
#### 配置場所
- docs/guide/developer/development-flow/README.md

#### 具体例
```markdown
# 開発ライフサイクルとドキュメント作成フロー
## 目的
- 開発フローを詳細に定義し、開発者とLLMが効率的に開発を行えるようにする
- 各ステップでの作成・更新すべきドキュメント、責任者、次のステップへの移行条件を明確にする

## 開発ライフサイクル概要
プロジェクトでは、以下の7ステップの開発ライフサイクルに沿って機能開発を進めます：

\```mermaid
flowchart LR
    A[ステップ1: 要件定義] --> B[ステップ2: 技術検討]
    B --> C[ステップ3: 実装]
    C --> D[ステップ4: テスト]
    D --> E[ステップ5: リリース]
    E --> F[ステップ6: 振り返り]
    F --> G[ステップ7: 評価]
\```

## ステップ別のドキュメント作成・更新ガイド

### ステップ1: 要件定義
- **作成するドキュメント**: Product Requirement Document (PRD)
- **主担当**: プロダクトマネージャー
- **次のステップへの移行条件**:
  - PRDが全ステークホルダーによって承認されていること
  - 要件の優先順位が明確になっていること
  - 成功指標が定量的に定義されていること

### ステップ2: 技術検討
- **作成するドキュメント**: Technical Design Document (TDD)
- **更新するドキュメント**: なし
- **主担当**: 開発リード
- **次のステップへの移行条件**:
  - TDDが技術レビューを通過していること
  - 実装計画が明確になっていること
  - 技術的なリスクが特定され、対策が計画されていること

### ステップ3: 実装
- **作成するドキュメント**: APIドキュメント、コードコメント
- **更新するドキュメント**: TDD（実装の詳細を反映）、README
- **主担当**: 開発者
- **次のステップへの移行条件**:
  - コードレビューが完了していること
  - ユニットテストが実装され、パスしていること
  - ドキュメントが更新されていること

### ステップ4: テスト
- **作成するドキュメント**: テスト計画、テスト結果
- **更新するドキュメント**: バグ修正に伴うコードとドキュメント
- **主担当**: QA/開発者
- **次のステップへの移行条件**:
  - すべての重要なテストケースがパスしていること
  - 重大なバグが修正されていること
  - テスト結果が文書化されていること

### ステップ5: リリース
- **作成するドキュメント**: デプロイ手順、リリースノート
- **更新するドキュメント**: 運用マニュアル、ユーザーガイド
- **主担当**: DevOps/リリースマネージャー
- **次のステップへの移行条件**:
  - デプロイが成功していること
  - リリースノートが公開されていること
  - 運用チームへの引き継ぎが完了していること

### ステップ6: 振り返り
- **作成するドキュメント**: 振り返りレポート
- **更新するドキュメント**: プロセス改善提案
- **主担当**: プロジェクトリード
- **次のステップへの移行条件**:
  - 振り返りミーティングが実施されていること
  - 学びと改善点が文書化されていること
  - 次回のプロジェクトへのフィードバックが準備されていること

### ステップ7: 評価
- **作成するドキュメント**: 機能評価レポート
- **更新するドキュメント**: 次期改善案、ロードマップ
- **主担当**: プロダクトマネージャー
- **次のステップへの移行条件**:
  - 定量的な成功指標の測定が完了していること
  - ユーザーフィードバックが収集・分析されていること
  - 次の機能開発サイクルへの教訓が文書化されていること

## AIインストラクション
このルールを読んだAIの行動指針：
- 開発ステージに応じた必要ドキュメントの特定と適切な内容・形式の提案
- 次ステージへの移行条件評価と責任者へのガイダンス提供
- 既存ドキュメントのステージ対応分析と開発・ドキュメントフロー改善の統合的提案
```


### ドキュメントルール例: LLMとのコラボレーションガイドライン
#### 配置場所
- docs/rules/ai/collaboration/README.md

#### 具体例
```markdown
# LLMとのコラボレーションにおけるドキュメンテーション

## 目的
- LLMとのコラボレーションを効率化し、ドキュメント作成・更新・参照の品質を向上させる
- LLMの特性を活かした効果的なドキュメント管理プロセスを確立する
- 人間とLLMの協働によるドキュメント管理の相乗効果を最大化する

## LLMがドキュメントを作成・更新する際のガイドライン

### 1. 事前の理解と計画
- 既存のドキュメント構造と内容を理解する
- 更新の目的と範囲を明確にする
- 人間に更新計画を提示し、承認を得る

### 2. ドキュメント作成・更新時
- 既存の書式やスタイルを一貫して適用する
- 冒頭のメタデータを必ず更新する
- Changelogに変更内容を記録する
- 客観的で正確な情報を提供する
- 適切な相互参照リンクを含める

### 3. レビューと確認
- 変更箇所を明示して人間のレビューを依頼する
- フィードバックを適切に反映する
- 最終確認を行った上で確定する

## LLMがドキュメントを参照する際の効率化

### 効率的なドキュメント理解のための戦略
- **重要ドキュメント一覧活用**: プロジェクト全体像把握のための重要ドキュメント一覧参照
- **構造化読み込み**: 目次からの開始と必要情報に絞った深掘り
- **メタデータ活用**: ステータス・更新日・バージョン確認による最新性と信頼性評価
- **相互参照追跡**: ドキュメント間関連性把握と関連情報の効率的収集
- **コンテキスト維持**: 複数ドキュメント参照時の一貫理解維持

### ドキュメント参照の最適化テクニック
- **キーワード検索活用**: 適切なキーワードによる関連情報の効率的発見
- **段階的詳細度**: 概要から詳細への段階的情報収集と理解深化
- **マルチモーダル情報統合**: テキスト・図表・コード組合せによる総合的理解
- **不明点の明示的特定**: 情報不足時の具体的質問準備
- **知識構造化**: 収集情報の論理的構造化と全体像把握

## LLMと人間の役割分担

### LLMの強み
- 大量ドキュメントの高速処理・分析
- パターン認識・一貫性チェック
- 標準フォーマット適用・維持
- クロスリファレンス自動生成・検証
- 多言語対応・フォーマット変換

### 人間の強み
- 戦略的判断・優先順位付け
- 暗黙知・組織文化の反映
- 創造的構造設計・改善
- 複雑文脈の理解・解釈
- 最終的品質保証・承認

### 効果的な協働のためのプラクティス
- LLM下書き作成と人間レビュー・編集の組合せ
- 人間方針決定とLLM実装の分担
- 定期的フィードバックループ確立
- LLM提案に対する人間判断・選択
- 協働プロセスの継続的改善・最適化

## AIインストラクション
このルールを読んだAIの行動指針：
- 既存構造理解に基づく更新計画の提示と書式・スタイルの一貫性・メタデータ更新の維持
- 変更箇所の明示と効率的なレビュープロセスの促進
- 重要ドキュメント一覧からの構造化読み込みとメタデータ・相互参照を活用した情報評価
- AIと人間の強みを相互補完する協働実践
```

### ドキュメントルール例: AIのRepomixの活用
#### 配置場所
- docs/rules/ai/tools/repomix/README.md

#### 具体例
```markdown
# AIのRepomixの活用
## 目的
- AIがRepomixを効果的に活用するためのルールを定義

## Repomixの効果的な活用ルール
- **効率的な理解**: MCPを利用して大規模コードベースを効率的に理解
- **パッケージ分析**: 特定パッケージの調査には、repomixによる分析を推奨
- **通信負荷軽減**: 数十ファイル以上のパッケージでは、関数シグネチャのみを分析し時間短縮
- **柔軟な利用**: リポジトリ全体、特定パッケージ、特定ディレクトリなど様々な階層で利用可能
- **設定確認**: MCPが未設定の場合は、ユーザにセットアップを促す

## AIインストラクション
このルールを読んだAIの行動指針：
- MCP経由でのRepomix活用による大規模コードベース分析と目的に応じた適切な分析範囲の選択
- 大規模パッケージでの関数シグネチャのみの分析優先による通信負荷軽減
- 分析結果からのコードベース構造と依存関係の明確な説明と必要に応じたセットアップ支援
```

### ドキュメントルール例: AIのコミットルール
#### 配置場所
- docs/rules/ai/commit/README.md

#### 具体例
```markdown
# AIのコミットルール
## 目的
- AIが適切にコミットの提案とメッセージを記録するためのルールを定義

## コミットルール
**必ず遵守すべきポイント**:
✅ **積極的な提案**: 作業完了時には必ずコミットを提案
✅ **標準形式の遵守**: 「種類: 要約」の形式で、詳細な説明と変更ファイル一覧を含める
✅ **プロンプト履歴の記録**: プロンプト履歴をコミットメッセージに含める
✅ **ユーザー承認**: コミット提案時にはユーザーの承認を得る

## AIインストラクション
このルールを読んだAIの行動指針：
- 作業完了時の「種類: 要約」形式コミット提案（詳細説明・変更ファイル一覧・プロンプト履歴を含む）
- ユーザー承認後の実行と複数変更の論理的まとまりによるコミット単位提案
- 適切な変更種類（feat/fix/docs/style/refactor/test/chore）の選択
```
### ドキュメントルール例: AIの共通インストラクション
#### 配置場所
- .clinerules

#### 具体例
```markdown
# AIの共通インストラクション

## 目的
- LLMがプロジェクトのドキュメントを効率的に発見・理解し、必要な情報に迅速にアクセスできるようにする
- 人間とLLMの協働を最適化するための、ドキュメントに関するルールとベストプラクティスを集約する
- コンテキストサイズを最適化し、効率的な情報処理を実現する

## 重要ルール

### 1. コンテキストサイズの最適化
- ドキュメントは必要になったときに初めて遅延読み込みし、コンテキストサイズを軽量に保つ
- 初期ロードでは必要最小限の情報のみを参照リンク経由で読み込む

### 2. 更新と検証
- **変更時の更新**: プロジェクト構造や重要ドキュメント変更時に即時更新
- **リンク検証**: 参照リンクの有効性を定期的に確認
- **整合性確認**: 設定ファイル間の矛盾がないことを確認

### 3. Repomixの活用
MCP経由で利用できるRepomixは以下のシナリオで活用：
- **新規プロジェクト理解**: 初めて触れるコードベースの全体構造把握
- **特定機能の調査**: 特定機能やモジュールの詳細分析
- **バグ修正・機能追加**: 修正や追加の影響範囲特定

詳細は[Repomixの活用](docs/rules/ai/tools/repomix.md)を参照。

## プロジェクト概要
[プロジェクトの説明と目的]

## プロジェクト構造
[主要ディレクトリと役割]

## 重要ドキュメント一覧
このセクションは、プロジェクトの重要なドキュメントを、LLMが効率的に発見できるようにまとめたリストです。
LLMはプロジェクトを理解する際に、まずこのセクションを参照してください。

### プロジェクト全体
- [プロジェクト概要 (README.md)](../../product/README.md) - プロジェクトの目的、主要機能、全体像
- [ドキュメント基本方針 (docs/README.md)](../../docs/README.md) - ドキュメント体系の全体像、ガイドライン、ルール

### 開発関連
- [開発者ガイド (docs/guide/developer/README.md)](../../docs/guide/developer/README.md) - 開発環境構築、開発フロー、アーキテクチャ
- [アーキテクチャ決定記録 (docs/guide/developer/architecture/adr/)](../../docs/guide/developer/architecture/adr/) - アーキテクチャに関する重要な意思決定の記録
- [パッケージ概要 (docs/guide/developer/packages/)](../../docs/guide/developer/packages/) - モノレポ内の各パッケージの概要と役割

### 運用関連
- [運用者ガイド (docs/guide/operator/README.md)](../../docs/guide/operator/README.md) - デプロイメント、監視、メンテナンス

### ユーザー関連
- [ユーザーガイド (docs/guide/users/README.md)](../../docs/guide/users/README.md) - 基本操作、機能説明、トラブルシューティング

### 製品情報
- [製品ロードマップ (docs/product/roadmaps/README.md)](../../docs/product/roadmaps/README.md) - 製品の将来計画
- [リリース済み機能 (docs/product/features/README.md)](../../docs/product/features/README.md) - 現在利用可能な機能

### AI関連ドキュメント
- [コミットメッセージのルール](../../rules/ai/commit.md) - AIがコミットを提案する際のルール
- [コード分析ガイド](../../rules/ai/code-analysis-guide.md) - コードベースを効率的に分析するための方法
- [最小変更ルール](../../rules/ai/minimum-change.md) - コード変更を最小限に抑えるためのガイドライン
- [質問ルール](../../rules/ai/ask.md) - 効果的な質問方法に関するガイドライン
- [プロンプトテンプレート集](../../rules/ai/prompts/) - 各種タスク用のプロンプトテンプレート
- [ドキュメント更新ルール](../../rules/ai/maintenance.md) - ドキュメント更新時のルール
- [Repomix利用ルール](../../rules/ai/tools/repomix.md) - Repomixツールの効果的な活用方法
- [AI設定ファイル確認](../../rules/ai/config.md) - AI設定ファイルの確認と最適化

## AIインストラクション
このルールを読んだAIの行動指針：

### 設定ファイル検証チェックリスト
1. **基本情報の完全性**: プロジェクト目的・概要の明確な記述、構造概要の提供、重要ドキュメントリンクの適切な分類
2. **リンクの有効性**: 参照リンクの有効性確認、相対パスの正確性、重要ドキュメントリンクの網羅性
3. **指示の明確性**: AIへの具体的指示、プロジェクト固有ルールの明示、期待行動の詳細説明
4. **最新性**: 最終更新日の記録、現プロジェクト状態との一致、古い情報・廃止参照の排除
5. **ツールセットアップ状況**: RepomixとPuppetierのMCP経由利用可能性確認

### 設定ファイルの活用
- コンテキスト最適化指示の遵守と必要に応じた遅延読み込みの実践
- 設定ファイルの誤りや古い情報発見時の更新提案
- 重要ドキュメント一覧記載のドキュメント優先参照によるプロジェクト構造・内容理解
- 必要に応じたAI関連ドキュメント参照とプロジェクト固有ルール・ガイドラインの遵守
- ドキュメント発見容易性の最優先考慮と必要情報への迅速アクセス確保
```


### ドキュメントルール例: ドキュメント依存関係管理
#### 配置場所
- docs/rules/documents/relations/README.md

#### 具体例
```markdown
# ドキュメント依存関係管理
## 目的
- 依存関係の明示的管理による変更時影響範囲の把握容易化
- 知識整合性維持と更新一貫性の確保
- 知識ネットワーク可視化による関連情報アクセスの容易化

## 依存関係メタデータの標準形式
各ドキュメントの末尾に「ドキュメント関係」セクションを追加：

\```markdown
## ドキュメント関係

### 参照ドキュメント
- [API仕様書](../specs/api/README.md) - API構造の直接参照
- [データモデル設計](../specs/data-models.md) - ユーザーモデルの概念参照

### 被参照ドキュメント
- [ユーザー認証ガイド](../guide/users/authentication.md) - 認証フローの派生関係
- [開発環境構築ガイド](../guide/developer/getting-started.md) - APIエンドポイントの概念参照

### 関連キーワード
#ユーザー認証 #API #セキュリティ #OAuth
\```

## 依存関係の種類
- **直接参照**: 内容を直接引用・参照している関係
- **概念参照**: 定義された概念や用語を使用している関係
- **派生関係**: 別のドキュメントから派生・詳細化されている関係

## 依存関係管理のベストプラクティス
- 更新時には、依存関係メタデータを参照して影響範囲を確認
- 双方向の参照関係を一致させる（参照と被参照の整合性を維持）
- 依存関係の種類を明示し、変更時の影響度を判断しやすくする
- 定期的に整合性を検証し、孤立したドキュメントや循環参照を特定・修正
## AIインストラクション
このルールを読んだAIの行動指針：
- 「ドキュメント関係」セクションの管理と双方向参照整合性の維持
- 依存関係種類の明確区別と影響範囲把握に基づく関連ドキュメント更新提案
- 孤立ドキュメント・循環参照の検出と知識ネットワーク整合性向上支援
- 関連ドキュメント更新必要性の判断と適切な更新提案
```

### ドキュメントルール例: ドキュメントテンプレートと参考例
#### 配置場所
- docs/templates/README.md

#### 具体例
```markdown
# ドキュメントテンプレートと参考例

## 目的
- 一貫性あるドキュメント作成の促進
- 新規ドキュメント作成効率の向上
- 実際の記入例提供による理解促進

## テンプレートの種類
- Product Requirement Document (PRD) テンプレート
- Technical Design Document (TDD) テンプレート
- テスト計画テンプレート
- リリースノートテンプレート
- 振り返りレポートテンプレート

## 包括的な参考例の提供

テンプレートだけでなく、実際に記入された包括的な参考例を提供することで、ドキュメント作成の理解を促進します：

templates/
├── README.md                     # テンプレート全体の説明と使い方
├── prd-template.md               # PRDテンプレート
├── tdd-template.md               # TDDテンプレート
└── example-feature/              # 機能開発ドキュメントの包括的な参考例
    ├── README.md                 # 概要と構成説明
    ├── PRD/                      # 要件定義ドキュメント
    │   ├── requirements.md       # 詳細な要件定義
    │   └── ...
    ├── Technical-Design/         # 技術設計ドキュメント
    │   ├── architecture.md       # アーキテクチャ設計
    │   ├── frontend/             # フロントエンド設計
    │   │   └── ...
    │   └── packages/             # パッケージ設計
    │       └── ...
    └── Release/                  # リリース関連ドキュメント
        └── ...

## 参考例の活用方法
- 新機能開発時に参考例を確認し、必要なドキュメントの種類と内容を理解する
- 参考例をベースに自分のドキュメントを作成し、時間を節約する
- 参考例と自分のドキュメントを比較し、品質を向上させる

## テンプレート管理のベストプラクティス
- テンプレートは定期的に見直し、プロジェクトの進化に合わせて更新する
- 実際のプロジェクトから得られた知見をテンプレートに反映する
- テンプレートの変更履歴を管理し、変更理由を記録する
- 新しいタイプのドキュメントが必要になった場合は、適切なテンプレートを作成する
## AIインストラクション
このルールを読んだAIの行動指針：
- 適切なテンプレート選択・活用と構造・形式を尊重した一貫性あるドキュメント作成
- 参考例分析による種類別特徴理解と内容充実度・品質向上
- 必要に応じたテンプレート改善・新規作成提案によるプロジェクト進化対応
- 新規ドキュメントタイプ必要時の適切なテンプレート作成提案
```

### ドキュメントルール例: ドキュメントメタデータ標準
#### 配置場所
- docs/rules/documents/metadata/README.md

#### 具体例
```markdown
# ドキュメントメタデータ標準
## 目的
- 属性情報標準化による管理・検索の容易化
- ライフサイクル管理の支援
- 対象読者・技術レベル明示による適切な情報アクセスの促進

## 標準メタデータセクション
すべてのドキュメントに以下のメタデータセクションを含める：

\```markdown
## メタデータ

**更新・確認情報**:
- 最終更新日: YYYY/MM/DD
- 最終確認日: YYYY/MM/DD

**文書情報**:
- ステータス: 草案 | レビュー中 | 承認済み | 公開 | 廃止予定 | アーカイブ
- バージョン: 1.0.0
\```

## メタデータフィールドの説明
### ステータス: ドキュメントの現在の状態
- **草案**: 初期作成中または大幅な改訂中
- **レビュー中**: レビュープロセス進行中
- **承認済み**: レビュー完了、正式版として承認済み
- **公開**: 外部公開可能な状態
- **廃止予定**: 将来的に廃止予定の情報
- **アーカイブ**: 歴史的参照のために保持

## メタデータ管理のベストプラクティス
- 必須メタデータフィールドを漏れなく記入する
- 日付は YYYY/MM/DD 形式で統一
- バージョン番号はセマンティックバージョニングに準拠
- 大きな変更がなくても、定期的に最終確認日を更新
## AIインストラクション
このルールを読んだAIの行動指針：
- 全ドキュメントへの標準メタデータセクション含有と更新時の日付・ステータス・バージョン適切更新
- メタデータ活用による文書最新性・信頼性評価と不足・非準拠発見時の修正提案
- 標準非準拠メタデータ形式の修正提案
```

### ドキュメントルール例: コードとドキュメントの同時更新原則
#### 配置場所
- docs/rules/documents/code-doc-sync/README.md

#### 具体例
```markdown
# コードとドキュメントの同時更新原則

## 目的
- コードとドキュメントの乖離防止と最新状態維持
- 知識一貫性確保と誤情報による問題防止
- ドキュメント更新責任の明確化と更新漏れ防止

## 基本原則
- 機能やコードを変更する際は、関連するドキュメントも同時に更新する
- ドキュメント更新はコードレビューの必須条件とする
- コードとドキュメントの乖離を防ぎ、常に最新の状態を維持する

## 実践ガイドライン
1. **変更影響範囲の特定**:
   - コード変更によって影響を受けるドキュメントを特定する
   - APIの変更→APIドキュメント、データモデルの変更→データモデルドキュメント

2. **大きな変更の場合**:
   - 事前にドキュメント更新計画を作成する
   - 関係者と共有し、フィードバックを得る

3. **コミットとPRの作成**:
   - コード変更とドキュメント更新を同じPRに含める
   - コミットメッセージにドキュメント更新の内容も明記する

4. **レビュープロセス**:
   - コードレビューと同時にドキュメントレビューも実施する
   - ドキュメント更新が不十分な場合はPRを承認しない

## 自動化と検証
- コミット前フックやCIパイプラインでドキュメント更新の検証を自動化
- ドキュメント更新チェックリストをPRテンプレートに組み込む
- 定期的なドキュメント監査を実施し、コードとの整合性を確認

## 例外と対応
- 緊急のバグ修正など、即時のドキュメント更新が難しい場合は、TODOコメントを残し、後日更新
- ドキュメント更新の技術的負債を追跡し、定期的に解消する時間を確保
- 大規模なリファクタリングの場合は、専用のドキュメント更新スプリントを計画
## AIインストラクション
このルールを読んだAIの行動指針：
- コード変更時の関連ドキュメント同時更新提案と影響範囲・更新内容の明確化
- API・データモデル変更時の優先的ドキュメント更新と大規模変更時の段階的計画立案
- 更新不足発見時の指摘と緊急時のTODOコメント・後日更新追跡提案
- 緊急変更時のドキュメント更新後回し場合のTODOコメント残存提案
```

### ドキュメントルール例: ナビゲーション構造の強化
#### 配置場所
- docs/rules/documents/navigation/README.md

#### 具体例
```markdown
# ナビゲーション構造の強化
## 目的
- ドキュメント間移動の容易化と必要情報への効率的アクセス実現
- 階層構造・関連性明示によるコンテキスト維持探索の実現
- 異なるステークホルダーの関連情報への迅速アクセス確保

## ナビゲーション要素

### 1. ドキュメントポータル
`docs/README.md`をプロジェクト全体のドキュメントへの体系的なガイドとして整備：

# プロジェクト ドキュメントポータル

## 対象読者別エントリーポイント
- [開発者向けガイド](./guide/developer/README.md) - 開発環境構築、API仕様、実装ガイドライン
- [運用担当者向けガイド](./guide/operator/README.md) - デプロイメント、監視、メンテナンス
- [エンドユーザー向けガイド](./guide/users/README.md) - 基本操作、機能説明、トラブルシューティング

## はじめに読むべきドキュメント
- [プロジェクト概要](./product/README.md) - プロジェクトの目的と主要機能
- [アーキテクチャ概要](./guide/developer/architecture/overview/README.md) - システム全体の設計思想
- [開発環境構築](./guide/developer/getting-started/setup.md) - 開発を始めるための準備

## 主要カテゴリ
- [製品情報](./product/README.md) - ビジョン、機能一覧、ロードマップ
- [開発ガイド](./guide/developer/README.md) - 開発者向けの技術情報
- [運用ガイド](./guide/operator/README.md) - システム運用に関する情報
- [ユーザーガイド](./guide/users/README.md) - エンドユーザー向けの使用方法
- [ルール集](./rules/README.md) - プロジェクトの各種規約とガイドライン

### 2. ブレッドクラム
各ドキュメントの冒頭に階層構造を示すブレッドクラムを追加：

**パス**: [ドキュメントポータル](../../README.md) > [開発者ガイド](../README.md) > [アーキテクチャ](./README.md)

### 3. 関連ドキュメントセクション
各ドキュメントの末尾に関連する他のドキュメントへのリンクを一覧で追加：

\```markdown
## 関連ドキュメント
- [API仕様書](../../reference/api/README.md) - 関連APIの詳細仕様
- [データモデル](../architecture/data-models.md) - 関連するデータモデルの説明
- [実装ガイドライン](../implementation/guidelines.md) - 実装時の注意点
\```

### 4. インデックスページ
各ディレクトリには必ずREADME.mdを配置し、そのディレクトリ内のコンテンツの概要と目次を提供：

\```markdown
# 開発者ガイド

## 概要
このディレクトリには、開発者向けの技術情報が含まれています。

## コンテンツ
- [開発環境構築](./getting-started/README.md) - 開発を始めるための準備
- [アーキテクチャ](./architecture/README.md) - システム設計に関する情報
- [API仕様](./api/README.md) - APIの詳細仕様
- [実装ガイドライン](./implementation/README.md) - コーディング規約と実装例
\```

## ナビゲーション構造のベストプラクティス
- 相対パスを一貫して使用し、リポジトリの移動や再構成に強い参照を維持
- 階層は3〜4レベルを超えないようにし、深すぎる階層構造を避ける
- 関連ドキュメントは、単なるリンクではなく、関連性の説明を含める
- 対象読者別のエントリーポイントを明確に提供し、ユーザージャーニーを考慮したナビゲーションを設計
## AIインストラクション
このルールを読んだAIの行動指針：
- ドキュメントポータル整備とブレッドクラム・関連ドキュメントセクション・ディレクトリREADMEの活用
- 一貫した相対パス使用、3〜4レベル以内の階層維持、リンク切れの検出・修正
- 対象読者別エントリーポイント提供とユーザージャーニー考慮のナビゲーション設計
- ドキュメント間リンク切れ検出時の修正提案
```

### ドキュメントルール例: ドキュメント検証システム
#### 配置場所
- docs/rules/documents/validation/README.md

#### 具体例
```markdown
# ドキュメント検証システム
## 目的
- 品質・一貫性の自動検証と問題の早期発見
- メタデータ・フォーマット標準準拠の確保
- ドキュメント間参照整合性の維持

## AIプロンプトベースの検証システム
LLM（大規模言語モデル）を活用したドキュメント検証と管理のためのプロンプト体系：

### 主要プロンプトパターン一覧
| 機能                   | 説明                                   | 主な用途                   |
| ---------------------- | -------------------------------------- | -------------------------- |
| 依存関係分析           | 依存関係を分析・視覚化                 | 影響範囲分析、構造理解     |
| 参照関係更新           | 参照関係を更新                         | 一貫性維持、双方向参照更新 |
| メタデータ検証         | メタデータの検証と問題報告             | 品質保証、標準適合確認     |
| メタデータ更新         | メタデータフィールドの更新             | メンテナンス、一括更新     |
| ドキュメント移行       | ドキュメントの移行支援                 | 構造再編成、最適配置       |
| 孤立ドキュメント検出   | 孤立したドキュメントの検出             | 品質保証、カバレッジ向上   |
| 索引・目次生成         | 索引・目次の自動生成                   | ナビゲーション改善         |
| ヘルプ情報表示         | ヘルプ情報の表示                       | 使用方法の理解             |

### AIプロンプト使用例
#### 依存関係の分析
\```
@docs/rules/dependencies/analyze @docs/guide/developer/
依存関係を分析して、深さ2レベルまでのmermaid形式で可視化してください。
\```

#### メタデータの検証
\```
@docs/rules/metadata/validate @docs/product/features/
メタデータを検証し、警告レベル以上の問題を修正してください。
\```

#### 孤立ドキュメントの検出
\```
@docs/rules/orphans/find @docs/
README.mdを除く、参照されていないドキュメントと参照先が存在しないドキュメントを検出してください。
\```

#### 索引の生成
\```
@docs/rules/navigation/generate-index @docs/guide/developer/
目次形式の索引を生成し、docs/guide/developer/index.mdに出力してください。
\```

#### 全ルールの一括適用
\```
@docs/rules/ @packages/
packages/ディレクトリ配下の全てのドキュメントに対して、全てのドキュメントルールを適用し、問題点を報告および可能な修正を行ってください。各ルールの適用状況と修正内容を一覧でまとめてください。
\```

## 検証項目
- **メタデータ完全性**: 必須メタデータフィールド存在確認
- **フォーマット一貫性**: 日付形式・バージョン番号形式・ステータス値検証
- **リンク有効性**: 内部・外部リンク検証
- **参照整合性**: 双方向参照（参照・被参照）一致確認
- **構造一貫性**: ディレクトリ構造・ファイル命名規則遵守確認

## AIを活用した検証プロセス
- ドキュメント作成・更新時のAI検証依頼による問題早期発見
- 定期的AI依頼ドキュメント品質レビューによる全体品質監視
- AI検証結果に基づく人間の最終判断・修正
- AI・人間協働によるドキュメント品質の継続的改善サイクル確立
## AIインストラクション
このルールを読んだAIの行動指針：
- 指定形式（@docs/rules/[ルール名]/ @[TARGET_DIR]）でのプロンプト構成と検証機能の適切な使い分け
- メタデータ完全性、フォーマット一貫性、リンク有効性、参照整合性などの検証と明確な報告・改善案提示
- 人間協働前提の検証プロセス実施と定期的品質レビューによる継続的改善支援
- 人間の最終判断を促す検証結果情報の整理
```

### ドキュメントルール例: ドキュメント検証システムの自己テストの整備
#### 配置場所
- docs/rules/self-check/README.md

#### 具体例
```markdown
# ドキュメント検証システムの自己テスト

## 目的
- AIのドキュメントルール理解度検証
- 検証結果に基づく改善点特定とドキュメント品質向上
- LLMによるLLM評価アプローチ確立と客観的検証実現

## ファイル構成
\```
docs/rules/self-check/
├── README.md                 # 本ドキュメント（検証システムの説明）
└── test/                     # テストケース用ディレクトリ
    ├── feature-spec/         # 機能仕様書の検証用ファイル
    │   ├── correct.md        # 正しい形式の機能仕様書
    │   └── wrong.md          # 間違った形式の機能仕様書
    └── api-doc/              # API仕様書の検証用ファイル
        ├── correct.md        # 正しい形式のAPI仕様書
        └── wrong.md          # 間違った形式のAPI仕様書
\```

## ドキュメントルール理解度の検証手順

### 検証プロセスの概要
1. **個別ドキュメントの検証**:
\```
@docs/rules/self-check/analyze @docs/rules/self-check/test/feature-spec/wrong.md
このファイルを読み込み、ドキュメントルールに照らして問題点を分析してください。ただし、ファイルの変更は行わず、修正すべき点の提案のみを行ってください。
\```

2. **複数パターン横断検証**:
\```
@docs/rules/self-check/analyze-all @docs/rules/self-check/test
test ディレクトリ配下の全てのwrong.mdファイルを分析し、各ドキュメントカテゴリのルール違反を検出してください。カテゴリ別に問題点をまとめ、共通する問題パターンを特定してください。
\```

3. **個別カテゴリの自己評価**:
\```
@docs/rules/self-check/evaluate @docs/rules/self-check/test/feature-spec/wrong.md @docs/rules/self-check/test/feature-spec/correct.md
間違ったファイルと修正済みファイルを比較し、以下の観点で評価してください：
1. 間違いの検出率（見つけられた問題点の割合）
2. 提案された修正の正確性（正解例との一致度）
3. ルール理解の深さ（表面的な修正か、根本的な理解に基づく修正か）
4. 総合的な理解度スコア（100点満点）
\```

4. **横断的な自己評価**:
\```
@docs/rules/self-check/evaluate-all @docs/rules/self-check/test
test ディレクトリ配下の全てのドキュメントカテゴリについて、wrong.mdとcorrect.mdを比較評価し、以下の観点でカテゴリ横断的な評価を行ってください：
1. カテゴリ別の理解度スコア比較
2. 共通する誤認識パターンの特定
3. カテゴリ間での理解度の差異分析
4. 総合的な理解度スコア（100点満点）

評価結果をレポート形式で出力し、改善が必要な領域を特定してください。
\```

## 検証用ファイル例

### 機能仕様書（feature-spec）

#### 間違い例（`docs/rules/self-check/test/feature-spec/wrong.md`）
\```markdown
# ユーザー認証機能

機能の説明：
ユーザーがシステムにログインするための認証機能です。

## 機能詳細
- ユーザー名とパスワードによるログイン
- SNSアカウント連携ログイン
- 二要素認証

## 技術仕様
認証にはJWTを使用します。
\```

#### 正解例（`docs/rules/self-check/test/feature-spec/correct.md`）
\```markdown
# ユーザー認証機能

## メタデータ
**最終更新日**: 2025/03/23
**ステータス**: 承認済み
**バージョン**: 1.0.0

## 目的
ユーザーが安全かつ便利にシステムにアクセスするための認証機能を提供する。

## 機能詳細
- ユーザー名とパスワードによるログイン
- SNSアカウント連携ログイン（Google, Facebook, Twitter）
- 二要素認証（メール, SMS, 認証アプリ）

## 技術仕様
- 認証プロトコル: OAuth 2.0 + JWT
- トークン有効期限: アクセストークン（1時間）, リフレッシュトークン（30日）
- パスワードポリシー: 最低8文字, 英数字記号混在

## ドキュメント関係
### 参照ドキュメント
- [セキュリティガイドライン](../../guide/developer/security/guidelines.md)
- [API仕様書](../../guide/developer/api/auth-endpoints.md)

### 被参照ドキュメント
- [ユーザー管理機能](../user-management.md)
- [アクセス制御機能](../access-control.md)

### 関連キーワード
#認証 #セキュリティ #ユーザー体験 #API
\```

### API仕様書（api-doc）

#### 間違い例（`docs/rules/self-check/test/api-doc/wrong.md`）
\```markdown
# ユーザー認証API

## エンドポイント
POST /api/auth/login

## リクエスト
{
  "username": "string",
  "password": "string"
}

## レスポンス
{
  "token": "string"
}
\```

#### 正解例（`docs/rules/self-check/test/api-doc/correct.md`）
\```markdown
# ユーザー認証API

## メタデータ
**最終更新日**: 2025/03/23
**ステータス**: 公開
**バージョン**: 2.1.0
**担当者**: 認証チーム

## 目的
ユーザー認証のためのAPIエンドポイントを提供し、安全なアクセストークンを発行する。

## エンドポイント
`POST /api/v2/auth/login`

## リクエスト
### ヘッダー
| 名前 | 必須 | 説明 |
|------|------|------|
| Content-Type | 必須 | application/json |
| Accept | 任意 | application/json |

### ボディ
\```json
{
  "username": "string",  // メールアドレスまたはユーザー名
  "password": "string",  // 8文字以上の英数字記号
  "remember_me": boolean // 省略可、デフォルトはfalse
}
\```

## レスポンス
### 成功時 (200 OK)
\```json
{
  "access_token": "string",  // JWT形式のアクセストークン
  "refresh_token": "string", // リフレッシュトークン
  "expires_in": 3600,        // アクセストークンの有効期限（秒）
  "token_type": "Bearer"     // トークンタイプ
}
\```

### エラー時
| ステータスコード | 説明 |
|----------------|------|
| 400 Bad Request | リクエスト形式が不正 |
| 401 Unauthorized | 認証情報が不正 |
| 429 Too Many Requests | リクエスト回数制限超過 |
| 500 Internal Server Error | サーバーエラー |

## 使用例
\```bash
curl -X POST https://api.example.com/api/v2/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "user@example.com", "password": "secureP@ss123"}'
\```

## セキュリティ考慮事項
- レート制限: 同一IPアドレスからの連続失敗は10回まで
- パスワードポリシー: 8文字以上、英数字記号混在
- トークン有効期限: アクセストークン1時間、リフレッシュトークン30日

## ドキュメント関係
### 参照ドキュメント
- [認証フロー概要](../../guide/developer/auth/flow.md)
- [エラーコード一覧](../error-codes.md)

### 被参照ドキュメント
- [ユーザープロファイルAPI](../user/profile.md)
- [認証ミドルウェア](../../guide/developer/middleware/auth.md)

### 関連キーワード
#API #認証 #セキュリティ #JWT
\```

## 検証結果の活用方法
- 検出問題点に基づくドキュメントルールの明確化・詳細化
- AI理解度低領域への具体例・ガイドライン追加
- 定期的検証実施によるAI理解度変化・改善点追跡
- 検証結果に基づくドキュメント作成者向けトレーニング資料改善

## 新しい検証用ファイルの追加方法
新規ドキュメントカテゴリ検証用ファイル追加手順：

1. `docs/rules/self-check/test/` 配下に新カテゴリ名ディレクトリ作成
2. ディレクトリ内に `correct.md`（正解例）と `wrong.md`（間違い例）作成
3. 各ファイルにカテゴリのドキュメントルールに基づく内容記載
4. README.mdに新カテゴリ検証方法追加

## AIインストラクション
このルールを読んだAIの行動指針：
- 検証用ファイル分析によるドキュメントルールに照らした問題点特定
- 間違い例と正解例の比較による自身の理解度客観的評価
- 明確なレポート形式での検証結果出力と改善必要領域の特定
- 必要に応じた新規ドキュメントカテゴリ検証用ファイルの生成
- 定期的自己評価によるドキュメントルール理解度向上
```

### ドキュメントルール例: ドキュメントルールの適用状況
#### 配置場所
- docs/PROGRESS.md
#### 具体例
```markdown
# ドキュメントルールの適用状況
## 目的
- ドキュメントルール適用状況の人とLLMによる把握容易化
- 改善活動進捗の可視化とステークホルダーへの透明性提供
- 優先順位に基づく段階的実装計画策定と効率的改善実現
- 改善活動成果測定と継続的改善サイクル確立

## 進捗管理のダッシュボード

### 進捗状況の可視化
プロジェクト全体の進捗状況を視覚的に把握するためのダッシュボード：

\```mermaid
pie title ドキュメントルール適用状況
    "適用済み" : 35
    "進行中" : 25
    "計画済み" : 20
    "未計画" : 20
\```

\```mermaid
gantt
    title ドキュメントルール実装計画
    dateFormat  YYYY-MM-DD
    section フェーズ1：基盤整備
    ガイドライン策定      :done, g1, 2025-01-01, 30d
    構造定義              :done, g2, 2025-01-15, 30d
    メタデータ標準策定    :active, g3, 2025-02-01, 45d
    テンプレート作成      :g4, 2025-02-15, 30d
    基本検証ルール定義    :g5, 2025-03-01, 45d
    section フェーズ2：主要ドキュメント
    開発者ガイド改訂      :g6, 2025-04-01, 60d
    運用ガイド改訂        :g7, 2025-05-01, 45d
    ユーザーガイド改訂    :g8, 2025-06-01, 45d
    section フェーズ3：拡張・最適化
    検証システム実装      :g9, 2025-07-01, 90d
    CI/CD統合             :g10, 2025-08-15, 45d
\```

## プロジェクト全体の進捗状況
| 指標                          | 状況     | 前回比  | トレンド |
| ----------------------------- | -------- | ------- | -------- |
| 全体進捗率                    | XX%      | +X%     | ↗        |
| フェーズ1（基盤整備）         | 完了     | -       | ✓        |
| フェーズ2（主要ドキュメント） | XX% 完了 | +X%     | ↗        |
| フェーズ3（拡張・最適化）     | 未着手   | -       | →        |

## 現在の課題と対応状況
| 課題                           | 優先度 | 状況     | 対応予定日 |
| ------------------------------ | ------ | -------- | ---------- |
| メタデータの不整合が多数存在   | 高     | 対応中   | YYYY/MM/DD |
| 古いドキュメント形式の残存     | 中     | 計画済み | YYYY/MM/DD |
| ドキュメント間の参照整合性不足 | 高     | 対応中   | YYYY/MM/DD |

## 次のステップ
1. メタデータ検証の自動化完了 (YYYY/MM/DD まで)
2. 運用ガイドの全面改訂 (YYYY/MM/DD まで)
3. 依存関係の可視化ツール導入 (YYYY/MM/DD まで)
\```

## 実装計画の策定

### フェーズ分け
ドキュメント改善を以下のフェーズに分けて段階的に実施：

## 実装フェーズ

### フェーズ1: 基盤整備 (YYYY/MM/DD - YYYY/MM/DD)
- [ ] ガイドラインの策定
- [ ] 構造の定義
- [ ] メタデータ標準の策定
- [ ] テンプレートの作成
- [ ] 基本的な検証ルールの定義

### フェーズ2: 主要ドキュメントの整備 (YYYY/MM/DD - YYYY/MM/DD)
- [ ] 開発者ガイドの改訂
- [ ] 運用ガイドの改訂
- [ ] ユーザーガイドの改訂
- [ ] プロダクト情報の整備
- [ ] 依存関係メタデータの追加

### フェーズ3: 拡張と最適化 (YYYY/MM/DD - YYYY/MM/DD)
- [ ] 検証システムの完全実装
- [ ] CI/CDパイプラインへの統合
- [ ] ナビゲーション構造の最適化
- [ ] 検索機能の強化
- [ ] フィードバックループの確立

## 優先順位付けの基準
1. **影響範囲**: より多くのステークホルダーに影響するドキュメントを優先
2. **更新頻度**: 頻繁に参照・更新されるドキュメントを優先
3. **技術的依存**: 他のドキュメントから多く参照されるドキュメントを優先
4. **実装容易性**: 短期間で大きな改善が見込める項目を初期に実施

## 各ルールへの具体的な適用状況
### ルール: メタデータへのチェンジログ記載
- **ルールの場所**: rules/documents/metadata/changelog/
- **ルール概要**: すべてのドキュメントは最終更新日とチェンジログを含むこと
- **重要度**: 高
- **最終検査日**: 2023/10/01
- **適用割合**: 20%
- **トレンド**: ↗ (先月比 +5%)
- **適用状態の詳細**:
    - ✅ docs/guide/developer/ 配下は全適用済み (2023/10/01)
    - ⚠️ docs/guide/operator/ 配下は部分適用 (30%)
    - ❌ docs/guide/users/ 配下は未適用
    - 🔄 docs/product/ 配下は適用中 (50%)
- **課題**:
    - チェンジログの記載漏れが多い
    - チェンジログの記載内容が不十分（変更内容が具体的でない）
- **改善計画**:
    - 自動チェックツールの導入 (YYYY/MM/DD まで)
    - チェンジログ記載のテンプレート提供 (YYYY/MM/DD まで)
    - コミット前フックでの検証実装 (YYYY/MM/DD まで)

### ルール: ドキュメント間の相互参照
- **ルールの場所**: rules/documents/relations/
- **ルール概要**: 関連ドキュメントへの相互参照を明示すること
- **重要度**: 中
- **最終検査日**: 2023/09/15
- **適用割合**: 15%
- **トレンド**: → (先月比 ±0%)
- **適用状態の詳細**:
    - ✅ docs/product/features/ 配下は全適用済み (2023/09/15)
    - ❌ その他のディレクトリは未適用
- **課題**:
    - 相互参照の一貫性が不足
    - 参照リンクの形式が統一されていない
- **改善計画**:
    - 相互参照検証ツールの開発 (YYYY/MM/DD まで)
    - 主要ドキュメントの相互参照追加 (YYYY/MM/DD まで)
## 進捗管理のベストプラクティス
- 定期的（週次・月次）進捗レポート更新による状況可視化
- 四半期ごとの実装計画見直しと優先順位・期間調整
- 小さな成功積み重ねアプローチによる早期価値提供
- 定量的指標（カバレッジ率・準拠率）と定性的指標（ユーザーフィードバック）の併用
- 改善活動自体の継続的改善によるプロセス効率化
- 改善活動自体を継続的に改善し、より効率的なプロセスを確立
## AIインストラクション
このルールを読んだAIの行動指針：
- 進捗状況分析とダッシュボード情報活用による優先対応領域特定
- 各ルール適用状況確認と優先順位基準に基づく改善提案
- 実装フェーズ考慮の段階的改善と早期価値提供アプローチ提案
- 小さな成功積み重ねによる早期価値提供方法の提案
- 小さな成功を積み重ねるアプローチを採用し、早期に価値を提供する方法を提案する
```

# Changelog
## 2025/03/23
- [追加] ドキュメント管理の概念モデルを追加（ガイドライン、ルール、検証システム）
- [変更] 用語を統一（ドキュメンテーションガイドライン→ドキュメントガイドライン）
- [追加] ESLintに着想を得た検証システム（Linter）の概念を導入
- [改善] 概念モデルを階層的なレイアウト（レベル1〜4）で表現し、関係性を明確化
- [追加] 全てのドキュメントルール例にAIインストラクションの項目を追加
- [変更] ドキュメント検証システムをAIプロンプトベースのシステムに変更
- [追加] ドキュメント検証システムにルール横断の一括適用例を追加
- [追加] ドキュメントルール例: ドキュメント検証システムの自己テストの整備セクションを追加（docs/rules/self-check/test/配下に機能仕様書とAPI仕様書の検証用ファイル例を含む）
- [改善] 複数パターン横断検証と横断的な自己評価の手順を追加し、カテゴリ間での理解度の差異分析を可能に
- [更新] 理想のドキュメント構造に自己テスト用ディレクトリ構造を追加

## 2025/03/21
- [追加] 初版作成